### state是什么
- 思考:组件作为一个设计图(函数)，必须要承载着可以被动态修改的功能，不然每改动一次就要画一张，
不实用又浪费，我们来思考如何解决这个问题，既然组件是一个函数，那么就可以从变量和函数入手，
我们约定一个变量，告诉大家他的职责是这个组件设计图的管理员，任何对设计图的修改都必须通知他，
就是让他管理组件的状态，并给他取名叫做state,经过考虑，他的值为对象比较妥当，而且一旦定义，
不可修改，(这就类似一个q群，只有群主有权限换管理员，普通成员只能@群主改，这在React中也一样，
只有在定义的时候改state，修改必须通过类似@群主的办法改)

从上面的思考，不难发现，state就是组件的一个的内置变量，用来管理组件的状态，而且一旦定义就
不能被修改(这个变量是React任命的组件设计图的管理员，所以是React工程队内部的工作人员)

### 为什么要使用state
这个问题可以从两个方面来回答

第一个，一个设计图(组件)不是所有东西都能改，你必须让大家清楚的知道哪些可以改，哪些不能改，
例如有人想在A4纸大的设计图上把原来的客厅改成像A3纸那么大，这不是个无理取闹吗，因此为了
避免这种不必要的操作，我们把允许修改的部门在管理员state那里登记一下，只有登记的才能改

第二个，你必须考虑到三种情况，如果在同一时间A改了a,B改了b，C改了c,那么组件如何应对？
如果A和B同时改了c，组件如何应对？如果A先改了c,过了一会B有想改c，你又怎么应对？
对于以上三种情况，我们都必须要把可以修改的部分集中起来，管理起来，有了管理员state
可以轻松解决以上情况

简单总结一下，state的存在就是因为希望设计图(组件)可以动态修改，但是同时不希望存在修改不当，
或者修改过于宽松而导致设计图(组件)成为天书

### 如何使用state
- 思考：这里必须先弄懂一个问题，才算是真的会用state，就是所有设计图(组件)的允许修改的部分
都可以在state中登记吗？如果这样，那这样管理员state应该会忙到切腹自尽吧～所以必须搞清楚，
组件里有哪些高贵的变量可以投向管理员state的怀抱～

对此问题，我们可以这样约定，对于组件(设计图)自身而言的那些可修改的部分，不是依赖其他变量可以得到的，
这样的变量，才能称之为高贵，因为他具有私有性（是组件自身的变量），同时具有独立性（不能通过其他方式得到），
但他又可修改，而且是设计图中的重要部分

理论知识永远是为了更好的实践，理清了state的来龙去脉后，就开始上代码正式学习如何使用了！
1. 如何定义state
- 1)用法

        this.state = {高贵的变量}
- 2)易错点

       需求：根据身份证号码获取出生省份，出生日期，年龄，性别
       误区：一锅端，认为所有的数据都放在state里
       解决：既然出生省份，出生日期，年龄，性别可以从身份证号码获得，说明对其有依赖性，在这个需求的前提下，只需要将身份证号放在state里，其他通过计算得到
       总结：考虑独立性，遵循“万不得已设state”原则

       代码：
        this.state = {
         idCardNo: ""
        };
        let idCardNo = this.state.idCardNo;
        let idCardInfo = {};
        if (idCardNo.length === 15 || idCardNo.length === 18) {
          idCardInfo = IdCard(this.state.idCardNo, "get"); //return {province,birthday,age,sex}
        }
        <p>身份证号：{this.state.idCardNo}</p>
        <p>省份：{idCardInfo.province || ""}</p>
        <p>出生日期：{idCardInfo.birthday || ""}</p>
        <p>年龄：{idCardInfo.age || ""}</p>
        <p>性别：{idCardInfo.sex || ""}</p>

2.如何正确地修改state
- 1)用法

这里提到了正确，就说明有不正确的改法，如下

        this.state.高贵的变量=值

(为什么可以成功呢？因为组件本质是一个函数，你直接改变量肯定是可以成功的，但是React工程队就不认账，他不会因为你这样改了而修改设计图的，这就像是你盗了管理员state的号，然后自己修改一样，不是群主修改，大家都不认账)

所以正确的做法应该是@群主，如下

        this.setState({修改……})   
        
- 2）易错点

心细的朋友已经发现了一些问题

第一个问题：应该直接修改高贵变量的值，还是用新的同名的高贵的变量去覆盖呢？(是否记得state一旦定义不可修改)

第二个问题：你@群主了，他就一定会立刻理你吗？(同步更新还是异步，秒回的问题)

<a href="https://zhuanlan.zhihu.com/p/35226897">setState真的是异步吗---知乎---俞孙皓</a>


3.经典场景
